"use strict";var _prototypeProperties=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},path=require("path"),BASE_DIR=__dirname+"/../../../../",TMP_DIR=process.env.TMP_DIR||"/tmp",LOCAL_DIR=path.join(BASE_DIR,TMP_DIR),_TURBO_ENV=void 0,_TURBO_API_KEY=void 0,_turbo=null,Controller=function(){function e(t,n){_classCallCheck(this,e),this._schema=t,_turbo=require("turbo360")({site_id:n.TURBO_APP_ID}),_TURBO_API_KEY=n.TURBO_API_KEY,_TURBO_ENV=n.TURBO_ENV}return _prototypeProperties(e,{checkCollectionDB:{value:function(e){var t="dev"==_TURBO_ENV?LOCAL_DIR+"/"+e+".db":TMP_DIR+"/"+e+".db";return new Promise(function(n,i){_turbo.checkCollectionFile(e,t).then(function(n){return n.found?null:_turbo.loadCollection(e,t,_TURBO_API_KEY)}).then(function(e){n(e)}).catch(function(e){i(e)})})},writable:!0,configurable:!0},syncCollection:{value:function(e){var t="dev"==_TURBO_ENV?LOCAL_DIR+"/"+e+".db":TMP_DIR+"/"+e+".db";return _turbo.syncCollection(e,t,_TURBO_API_KEY)},writable:!0,configurable:!0},parseFilters:{value:function(e){if(null==e)return null;var t={};return t.sort="asc"==e.sort?"timestamp":"-timestamp",delete e.sort,t.limit=e.limit?parseInt(e.limit):0,delete e.limit,t},writable:!0,configurable:!0}},{collectionName:{value:function(){return this._schema.collectionName()},writable:!0,configurable:!0},schema:{value:function(){return this._schema.schema()},writable:!0,configurable:!0},get:{value:function(e){},writable:!0,configurable:!0},getById:{value:function(e){},writable:!0,configurable:!0},post:{value:function(e){},writable:!0,configurable:!0},put:{value:function(e,t){},writable:!0,configurable:!0},delete:{value:function(e){},writable:!0,configurable:!0}}),e}();module.exports=Controller;